---
layout:     post
title:      "Industry 4.0 Software"
subtitle:   "The future of the industry"
date:       2023-03-02 12:00:00
author:     "Sergio Pérez"
catalog: false
header-style: text
tags:
  - PoC
  - Industry 4.0
---

The project that has been carried out consists of a study of the state of the art of Industry 4.0 and its relationship with software development. To this end, firstly, research has been carried out on the industry and its evolution. Secondly, the fundamental pillars on which Industry 4.0 is based have been analyzed. A brief description of each of them is made. Finally, a proof of concept has been made where based on the Azure ecosystem has been planned and designed a cloud-based solution for device monitoring.

## Introduction

The Internet of Things or IoT (Internet of Things) is a concept that refers to a digital interconnection of everyday objects with the internet, i.e. internet connection more with objects than with people. Currently, there has been an explosion of IoT that has reached multiple sectors. But undoubtedly, Industry has been one of those that has taken advantage of it the most. We are talking about a fourth industrial revolution, but to treat it as such we must first know what the previous ones have been like.

In 1820, the first Industrial Revolution took place, in which mankind made the leap from manual labor and farms to the use of machines. In particular, it was the appearance of the steam engine that brought about the greatest change. Decades later, the second industrial revolution, which took place between 1870 and 1914, would bring the use of electricity and with it automation, the assembly line and mass production. It could be said that, in this period, factories as we know them today were born. Nearly 100 years later, in the year 2000, the advent of computers brought the automobile to the factory floor.

Today, the fourth industrial revolution is taking place, which focuses on connecting computers and machines to create networks. This allows monitoring and the creation of alerts to inform at all times of the status of the same.

![Industrial Revolution](/img/in-post/industry-4-0/01-industrial-revolution.png)

The following is an analysis of some of the consequences of this revolution by certain authors.

"Francis Griffiths and Melani Ooi report that the progress of this revolution has occurred in an exponential order. On the one hand, we have the positive consequences such as the creation of new innovative systems, but on the other hand there is the abandonment of existing systems.

> "... la cuarta revolución industrial que estamos viviendo avanza a un ritmo exponencial y trastorna muchos sistemas y procesos existentes al tiempo que crea soluciones totalmente nuevas e innovadoras." La cuarta revolución industrial - Industria 4.0 e IoT, Francis Griffiths y Melanie Ooi.

Not all authors see this technological advance as a revolution.  Lorenzo Bassi, in his article "Industry 4.0: Hope, hype or revolution", is more of a denialist and does not believe that we are in an industrial revolution, but that it has been a strategy to leverage the large investment of the "Big Four" in industrial activities.

> “Industry leaders, mainly from Germany where the term “Industry 4.0” born in 2011, are extremely optimistic and are creating great expectations around this new industry “revolution”, probably with the unspoken goal to respond to the huge investments of the new “USA’s Big Four” (Amazon, Google, Apple, Facebook) that are revving their activities to enter new industrial fields grabbing a disproportionately large market share from today consolidated market leader.”, Industry 4.0: Hope, hype or revolution?, Lorenzo Bassi

We currently have large European consultancies supporting Industry 4.0 but it is the large companies such as Amazon or Microsoft that have enabled them to realize this growth.

## The Industrial IoT

At this point, the fundamental pillars on which Industry 4.0 is based are discussed, which are based on the following Illustration.

![IIoT Pillars](/img/in-post/industry-4-0/02-pillars-iiot.png)

### Big Data and Analytics

In Industry 4.0, millions of data are generated by all the devices installed in factories. In addition, these have already developed software related to inventory or customers.

Applying AI (Artificial Intelligence) analysis allows better decisions to be made based on real-time data of what is happening in the company and, therefore, to act accordingly.

### Horizontal and Vertical Integration

Also known as the backbone of Industry 4.0. Horizontal integration refers to integration at the field level, i.e., between plants or production lines. Vertical integration ensures that all levels of the organization are well connected.

### Cloud Computing

For Industry 4.0, Cloud Computing is the "great enabler" of digital transformation. It is worth noting that it is not only because of its speed, scalability, storage or efficiency, but because of all the technologies it brings with it.

The picture below shows the architecture of Microsoft Azure, which was used to carry out the proof of concept of this work.

![Microsoft Azure Infrastructure](/img/in-post/industry-4-0/03-microsoft-azure-infrastructure.png)

In this work, it highlights the point of "Serverless", which can be known as "FaaS" or "Function as a Service", where you pay for the execution time of a code.

- The left icon "Azure Functions" represents the functions themselves, where some input data is received, processed and returned to an output.
- The middle icon, "Logic workflows" represents logical applications, i.e. workflows consisting of several components.
- The last icon, "Event Grid" or queues as services which are used for the exchange of messages.

Other well-known Cloud Computing providers are Amazon AWS, Google Cloud, SAP, etc.

### Augmented Reality (AR)

Another great point of Industry 4.0 is augmented reality. A clear example is the creation of dynamic instructions with the use of mobile devices where a more detailed plan of a machine can be observed and the operator could interact to get more information.

![Augmented Reality](/img/in-post/industry-4-0/04-augmented-reality.png)

### Industrial IoT

The fundamental pillar of the diagram shown in Illustration 2 is the Industrial IoT. It represents the devices, robots, machinery, equipment, sensors, real-time information, etc., that help companies to design, modify, prevent, monitor their supply chain, etc.

### 3D Printing

The main objective of 3D printing is to provide companies with greater agility when prototyping products.

### Autonomous Robots

At this point, the "Edge IoT" or IoT at the edge stands out, which allows a faster response when carrying out certain actions, since the processing is performed on the device itself.

![Amazon Autonomous Robots](/img/in-post/industry-4-0/05-amazon-autonomous-robots.png)  

### Digital Twins

Digital Twins are simulations of real-life machines, processes or systems based on IoT sensors. This component allows understanding and analyzing industrial systems and products, as well as improving current products, optimizing operations, reducing costs and creating innovative customer experiences. The following sections discuss how it can be implemented in a more or less simple way using existing technology.

### Cybersecurity

The last point addressed by the diagram in Illustration 2 is cybersecurity. This is a field that could be the subject of an entire presentation. Just to mention its importance in having millions of devices dependent on a network and exposed to external threats. Imagine the danger of losing control of your devices, for example, in chemical or automotive plants.

## Proof of concept

The main motivation of this work is how the control of fluid tanks in a factory could be monitored in real time.

As shown in the following images, a real example was already developed. It is a control panel for operation and monitoring that uses a sensor on the top of the tank to obtain the tank pressure and several sensors on the hatches to detect the opening of the hatches. In this example, a history of alarms and graphs can be downloaded. However, this process was done manually.

![Fluid Tank](/img/in-post/industry-4-0/06-fluid-tank.png)  

### Azure as base

As mentioned in the previous sections, Azure is used as a technological base to see what options are currently available in the market.

![Azure](/img/in-post/industry-4-0/07-azure.png)  

The next picture shows a general overview of the available technology. On the left side we have the things, where the sensors will be included. In the middle we have the Azure infrastructure, where the IoT Hub, "Digital Twins" and data storage stand out. And finally, in the visualization section, there is "Time Series Insights" or "Power BI".

![Reference Architecture](/img/in-post/industry-4-0/08-reference-architecture.png)  

### Design

At this point, the proof-of-concept design is discussed, mentioning, first, modeling, then DTDL and, finally, DTDL-related support tools.

#### Model

The first step carried out in the design is the UML modeling of the different components.

![Fluid Tank Model](/img/in-post/industry-4-0/09-fluid-tank-model.png)  

Azure introduces DTDL or "Digital Twins Definition Language", a model deception language for IoT devices which is based on JSON. Example of factory description:

```json
{
    "@id": "dtmi:digital_factory:my_factory;1",
    "@type": "Interface",
    "displayName": "Digital Factory - Interface Model",
    "@context": "dtmi:dtdl:context;2",
    "contents": [
        {
            "@type": "Property",
            "name": "FactoryId",
            "schema": "string"
        },
        {
            "@type": "Property",
            "name": "FactoryName",
            "schema": "string",
            "writable": true
        },
        {
            "@type": "Relationship",
            "@id": "dtmi:digital_factory:factory:rel_has_floors;1",
            "name": "rel_has_floors",
            "displayName": "Has Floors",
            "target": "dtmi:digital_factory:floor;1"
        }
    ]
}
```

#### Digital Twins model tools

Before proceeding with the models, it was necessary to validate them, for which a command line program written in C# was used to validate the content of the folder containing the model.

![Project Model Validation](/img/in-post/industry-4-0/10-product-model-validation.png)  

The second tool is "Digital Twins Explorer". On the one hand, it is displayed modeled through a directed graph diagram. On the right side there is information related to the devices such as the identifier, the name or the current pressure. On the other hand, the program allows queries to be made on the network, although this option has not been used in the project.

![Digital Twins Explorer](/img/in-post/industry-4-0/11-digital-twins-explorer.png)  

#### Architecture

In terms of architecture, we used an architecture based on queues and functions as services.

![Architecture](/img/in-post/industry-4-0/12-architecture.png)  

From left to right:

1. The devices will generate data every "x" seconds and send it to the Azure IOT Hub who will act as API Gateway for all our devices.
2. The "IOT Hub" will publish the messages in a queue ("Azure Event Grid"). These messages will be processed by an "Azure Function" that will transform the collected data and send it to the "Azure Digital Twins" component.
Azure Digital Twins" will identify each message by linking it to a previously loaded DTDL model. In addition, it will publish the result of such processing in an "Event Hub".
4. The "Event Hub" will target another function, which will be in charge of transforming the object created by the Azure Digital Twin component to JSON format.
5. Finally, we will make use of "Azure Time Series Insights" to visualize the results.

#### Technologies

In this project we used one of the best features of functions as a service (FaaS), the use of different languages, thus taking full advantage of code reuse.

![Architecture with technologies](/img/in-post/industry-4-0/13-architecture-with-technologies.png)

- The simulation and generation of the IoT devices is based on an open source random generation program.
- The function written in Python has been created from scratch for this test, so in this case, I used an arbitrary language.
- The last transformation function was written in C# and has been reused from an open repository by Microsoft since the transformation from Digital Twin Object to JSON is usually the same in all projects.

#### Visualization

Time Series Insights" was used for the visualization section. As discussed in section 3.3, cloud computing is not only storage or computing power, but provides services already integrated with its platform that would otherwise be more expensive to integrate.

![Visualization](/img/in-post/industry-4-0/14-visualization.png)  

## Conclusion

Throughout this work we have been able to see what Industry 4.0 is, where it comes from and what its fundamental pillars are. For this we have not only explained its fundamentals but we have also made a proof of concept using the technologies offered by a cloud service provider (Azure).
In terms of future work, three points are proposed:

- The first one, to explore other ecosystems, specifically Amazon AWS. It is proposed to carry out the same test and compare the services offered by both providers.
- The second is to automate the creation process. Initially the Azure web interface was used, which is correct for a punctual use of it. When it comes to raising multiple services the work becomes tedious and complex.
- The last point deals with the research of methodologies for the development of these applications. For once the implementation has to be maintainable to avoid abandonment of the same.

## References

[1] Real-time data visualization of data from Azure IoT Hub – Power BI . Retrieved Jun 6, 2020, from <https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-live-data-visualization-in-power-bi>

[2] F. Griffiths and M. Ooi, "The fourth industrial revolution - Industry 4.0 and IoT [Trends in Future I&M]," in IEEE Instrumentation & Measurement Magazine, vol. 21, no. 6, pp. 29-43, December 2018, doi: 10.1109/MIM.2018.8573590.

[3] L. Bassi, "Industry 4.0: Hope, hype or revolution?," 2017 IEEE 3rd International Forum on Research and Technologies for Society and Industry (RTSI), 2017, pp. 1-6, doi: 10.1109/RTSI.2017.8065927.

[4] Why Everyone Must Get Ready For The 4th Industrial Revolution. Retrieved Apr 5, 2016, from <https://www.forbes.com/sites/bernardmarr/2016/04/05/why-everyone-must-get-ready-for-4th-industrial-revolution/>

[5] What Is Industry 4.0? Definition, Technologies, Benefits SAP Insights. Retrieved May 28, 2021, from <https://insights.sap.com/what-is-industry-4-0/>

[6] Azure Event Hubs and its Complete Overview Serverless360. Retrieved May 28, 2021, from <https://www.serverless360.com/azure-event-hub>

[7] Azure Event Grid vs Event Hub Comparison Serverless360. Retrieved Sep 30, 2019,from <https://www.serverless360.com/blog/azure-event-grid-vs-event-hub>
